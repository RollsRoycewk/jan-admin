{"version":3,"file":"js/379.d24caed0.js","mappings":"iJAKO,MAAMA,EAAiBA,IAIrB,CACL,CACEC,GAAI,IACJC,eAAgB,OAChBC,eAAgB,aAChBC,eAAgB,SAChBC,SAAU,CACR,CACEJ,GAAI,MACJC,eAAgB,OAChBC,eAAgB,iBAChBC,eAAgB,WAElB,CACEH,GAAI,MACJC,eAAgB,OAChBC,eAAgB,aAChBC,eAAgB,iBAElB,CACEH,GAAI,MACJC,eAAgB,OAChBC,eAAgB,aAChBC,eAAgB,UAItB,CACEH,GAAI,IACJC,eAAgB,OAChBC,eAAgB,WAChBC,eAAgB,SAChBC,SAAU,CACR,CACEJ,GAAI,MACJC,eAAgB,OAChBC,eAAgB,uBAChBC,eAAgB,aAItB,CACEH,GAAI,IACJC,eAAgB,OAChBC,eAAgB,iBAChBC,eAAgB,SAChBC,SAAU,IAEZ,CACEJ,GAAI,IACJC,eAAgB,OAChBC,eAAgB,iBAChBC,eAAgB,SAChBC,SAAU,IAEZ,CACEJ,GAAI,IACJC,eAAgB,OAChBC,eAAgB,gBAChBC,eAAgB,SAChBC,SAAU,I,+EChET,MAAMC,EAAWA,IAKf,CACL,CACEL,GAAI,IACJM,MAAO,QACPC,SAAU,mBAEZ,CACEP,GAAI,IACJM,MAAO,MACPC,SAAU,wBAEZ,CACEP,GAAI,IACJM,MAAO,OACPC,SAAU,YAEZ,CACEP,GAAI,IACJM,MAAO,OACPC,SAAU,YAEZ,CACEP,GAAI,IACJM,MAAO,OACPC,SAAU,YAEZ,CACEP,GAAI,IACJM,MAAO,KACPC,SAAU,SAQHC,EAAkBC,GAItB,CAAC,IAAK,MAAO,MAAO,MAAO,IAAK,MAAO,IAAK,IAAK,I,mWCJpDC,EAAe,CACnBN,SAAU,WACVO,MAAO,kBAMHC,GAAgBC,EAAAA,EAAAA,IAAI,IACpBC,EAAoBC,UACxBH,EAAcI,OAAQjB,EAAAA,EAAAA,IAAgB,EAExCe,KAEAG,EAAAA,EAAAA,GAAgBH,GAGhB,MAAMI,GAAUL,EAAAA,EAAAA,IAAI,MAGdM,EAAoBJ,UACxB,MAAMK,QAAoBZ,EAAAA,EAAAA,IAAea,EAAMZ,QAC/CS,EAAQF,MAAMM,eAAeF,EAAY,GAG3CG,EAAAA,EAAAA,KACE,IAAMF,EAAMZ,SACXe,IACKA,GAAKL,GAAmB,IAOhC,MAAMM,GAAOC,EAAAA,EAAAA,MACPC,EAAYZ,UAKhBa,EAAAA,GAAAA,QAAkBH,EAAKI,EAAE,+BACzBC,GAAQ,EAMJA,EAASA,KACbC,EAAM,qBAAqB,EAAM,E,grBC7FnC,MAAMC,EAAc,EAEpB,Q,qCCmCA,MAAMC,GAAWpB,EAAAA,EAAAA,IAAI,IACfqB,EAAcA,KAClBD,EAASjB,OAAQX,EAAAA,EAAAA,MACjB8B,EAAQC,IAAI,yBAA0BH,EAASjB,MAAM,EAEvDkB,KAEAjB,EAAAA,EAAAA,GAAgBiB,GAKhB,MAAMG,GAAexB,EAAAA,EAAAA,IAAI,IACnByB,GAA8BzB,EAAAA,EAAAA,KAAI,GAClC0B,EAA+BC,IACnCH,EAAarB,MAAQwB,EAAIxC,GACzBsC,EAA4BtB,OAAQ,CAAI,E,0gCCrD1C,MAAM,EAAc,EAEpB,O","sources":["webpack://jan-admin/./src/api/permission.js","webpack://jan-admin/./src/api/role.js","webpack://jan-admin/./src/views/role-list/components/DistributePermission.vue","webpack://jan-admin/./src/views/role-list/components/DistributePermission.vue?4fbf","webpack://jan-admin/./src/views/role-list/index.vue","webpack://jan-admin/./src/views/role-list/index.vue?fc52"],"sourcesContent":["// import request from '@/utils/request'\r\n\r\n/**\r\n * 获取所有权限\r\n */\r\nexport const permissionList = () => {\r\n  //   return request({\r\n  //     url: '/permission/list'\r\n  //   })\r\n  return [\r\n    {\r\n      id: '1',\r\n      permissionName: '员工管理',\r\n      permissionMark: 'userManage',\r\n      permissionDesc: '员工管理菜单',\r\n      children: [\r\n        {\r\n          id: '1-1',\r\n          permissionName: '分配角色',\r\n          permissionMark: 'distributeRole',\r\n          permissionDesc: '为员工分配角色'\r\n        },\r\n        {\r\n          id: '1-2',\r\n          permissionName: '导入员工',\r\n          permissionMark: 'importUser',\r\n          permissionDesc: '通过 excel 导入员工'\r\n        },\r\n        {\r\n          id: '1-3',\r\n          permissionName: '删除员工',\r\n          permissionMark: 'removeUser',\r\n          permissionDesc: '删除员工'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: '2',\r\n      permissionName: '角色列表',\r\n      permissionMark: 'roleList',\r\n      permissionDesc: '角色列表菜单',\r\n      children: [\r\n        {\r\n          id: '2-1',\r\n          permissionName: '分配权限',\r\n          permissionMark: 'distributePermission',\r\n          permissionDesc: '为角色分配权限'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: '3',\r\n      permissionName: '权限列表',\r\n      permissionMark: 'permissionList',\r\n      permissionDesc: '权限列表菜单',\r\n      children: []\r\n    },\r\n    {\r\n      id: '4',\r\n      permissionName: '文章排名',\r\n      permissionMark: 'articleRanking',\r\n      permissionDesc: '文章排名菜单',\r\n      children: []\r\n    },\r\n    {\r\n      id: '5',\r\n      permissionName: '创建文章',\r\n      permissionMark: 'articleCreate',\r\n      permissionDesc: '创建文章页面',\r\n      children: []\r\n    }\r\n  ]\r\n}\r\n","// import request from '@/utils/request'\r\n\r\n/**\r\n * 获取所有角色\r\n */\r\nexport const roleList = () => {\r\n  //   return request({\r\n  //     url: '/role/list'\r\n  //   })\r\n\r\n  return [\r\n    {\r\n      id: '1',\r\n      title: '超级管理员',\r\n      describe: '唯一账号，可以操作系统所有功能'\r\n    },\r\n    {\r\n      id: '2',\r\n      title: '管理员',\r\n      describe: '由超管指定，可以为多个，协助超管管理系统'\r\n    },\r\n    {\r\n      id: '3',\r\n      title: '人事经理',\r\n      describe: '主管人事相关业务'\r\n    },\r\n    {\r\n      id: '4',\r\n      title: '销售经理',\r\n      describe: '主管销售相关业务'\r\n    },\r\n    {\r\n      id: '5',\r\n      title: '保安队长',\r\n      describe: '主管安保相关业务'\r\n    },\r\n    {\r\n      id: '6',\r\n      title: '员工',\r\n      describe: '普通员工'\r\n    }\r\n  ]\r\n}\r\n\r\n/**\r\n * 获取指定角色的权限\r\n */\r\nexport const rolePermission = (roleId) => {\r\n  // return request({\r\n  //   url: `/role/permission/${roleId}`\r\n  // })\r\n  return ['1', '1-1', '1-2', '1-3', '2', '2-1', '3', '4', '5']\r\n}\r\n\r\n/**\r\n * 为角色修改权限\r\n */\r\nexport const distributePermission = (data) => {\r\n  // return request({\r\n  //   url: '/role/distribute-permission',\r\n  //   method: 'POST',\r\n  //   data\r\n  // })\r\n  return null\r\n}\r\n","<template>\r\n  <el-dialog\r\n    :title=\"$t('msg.excel.roleDialogTitle')\"\r\n    :model-value=\"modelValue\"\r\n    @close=\"closed\"\r\n  >\r\n    <el-tree\r\n      ref=\"treeRef\"\r\n      :data=\"allPermission\"\r\n      show-checkbox\r\n      check-strictly\r\n      node-key=\"id\"\r\n      default-expand-all\r\n      :props=\"defaultProps\"\r\n    >\r\n    </el-tree>\r\n\r\n    <template #footer>\r\n      <span class=\"dialog-footer\">\r\n        <el-button @click=\"closed\">{{ $t('msg.universal.cancel') }}</el-button>\r\n        <el-button type=\"primary\" @click=\"onConfirm\">{{\r\n          $t('msg.universal.confirm')\r\n        }}</el-button>\r\n      </span>\r\n    </template>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script setup>\r\nimport { defineProps, defineEmits, ref, watch } from 'vue'\r\nimport { permissionList } from '@/api/permission'\r\nimport { watchSwitchLang } from '@/utils/i18n'\r\nimport { rolePermission } from '@/api/role'\r\nimport { useI18n } from 'vue-i18n'\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst props = defineProps({\r\n  modelValue: {\r\n    type: Boolean,\r\n    required: true\r\n  },\r\n  roleId: {\r\n    type: String,\r\n    required: true\r\n  }\r\n})\r\n\r\nconst defaultProps = {\r\n  children: 'children',\r\n  label: 'permissionName'\r\n}\r\n\r\nconst emits = defineEmits(['update:modelValue'])\r\n\r\n// 所有权限\r\nconst allPermission = ref([])\r\nconst getPermissionList = async () => {\r\n  allPermission.value = permissionList()\r\n}\r\ngetPermissionList()\r\n\r\nwatchSwitchLang(getPermissionList)\r\n\r\n// tree 节点\r\nconst treeRef = ref(null)\r\n\r\n// 获取当前用户角色的权限\r\nconst getRolePermission = async () => {\r\n  const checkedKeys = await rolePermission(props.roleId)\r\n  treeRef.value.setCheckedKeys(checkedKeys)\r\n}\r\n\r\nwatch(\r\n  () => props.roleId,\r\n  (val) => {\r\n    if (val) getRolePermission()\r\n  }\r\n)\r\n\r\n/**\r\n * 确定按钮点击事件\r\n */\r\nconst i18n = useI18n()\r\nconst onConfirm = async () => {\r\n  //     await distributePermission({\r\n  //     roleId: props.roleId,\r\n  //     permissions: treeRef.value.getCheckedKeys()\r\n  //   })\r\n  ElMessage.success(i18n.t('msg.role.updateRoleSuccess'))\r\n  closed()\r\n}\r\n\r\n/**\r\n * 关闭\r\n */\r\nconst closed = () => {\r\n  emits('update:modelValue', false)\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./DistributePermission.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./DistributePermission.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__","<template>\r\n  <div>\r\n    <el-card>\r\n      <el-table :data=\"allRoles\" border style=\"width: 100%\">\r\n        <el-table-column :label=\"$t('msg.role.index')\" type=\"index\" width=\"120\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('msg.role.name')\" prop=\"title\">\r\n        </el-table-column>\r\n        <el-table-column :label=\"$t('msg.role.desc')\" prop=\"describe\">\r\n        </el-table-column>\r\n        <el-table-column\r\n          :label=\"$t('msg.role.action')\"\r\n          prop=\"action\"\r\n          width=\"260\"\r\n          #default=\"{ row }\"\r\n        >\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"mini\"\r\n            @click=\"onDistributePermissionClick(row)\"\r\n            v-permission=\"['distributePermission']\"\r\n          >\r\n            {{ $t('msg.role.assignPermissions') }}\r\n          </el-button>\r\n        </el-table-column>\r\n      </el-table>\r\n    </el-card>\r\n    <distribute-permission\r\n      v-model=\"distributePermissionVisible\"\r\n      :roleId=\"selectRoleId\"\r\n    ></distribute-permission>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { roleList } from '@/api/role'\r\nimport { ref } from 'vue'\r\nimport { watchSwitchLang } from '@/utils/i18n'\r\nimport DistributePermission from './components/DistributePermission.vue'\r\n\r\nconst allRoles = ref([])\r\nconst getRoleList = () => {\r\n  allRoles.value = roleList()\r\n  console.log('allRoles.value=======>', allRoles.value)\r\n}\r\ngetRoleList()\r\n\r\nwatchSwitchLang(getRoleList)\r\n\r\n/**\r\n * 分配权限\r\n */\r\nconst selectRoleId = ref('')\r\nconst distributePermissionVisible = ref(false)\r\nconst onDistributePermissionClick = (row) => {\r\n  selectRoleId.value = row.id\r\n  distributePermissionVisible.value = true\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped></style>\r\n","import script from \"./index.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./index.vue?vue&type=script&setup=true&lang=js\"\n\nconst __exports__ = script;\n\nexport default __exports__"],"names":["permissionList","id","permissionName","permissionMark","permissionDesc","children","roleList","title","describe","rolePermission","roleId","defaultProps","label","allPermission","ref","getPermissionList","async","value","watchSwitchLang","treeRef","getRolePermission","checkedKeys","props","setCheckedKeys","watch","val","i18n","useI18n","onConfirm","ElMessage","t","closed","emits","__exports__","allRoles","getRoleList","console","log","selectRoleId","distributePermissionVisible","onDistributePermissionClick","row"],"sourceRoot":""}