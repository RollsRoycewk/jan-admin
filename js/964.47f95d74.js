"use strict";(self["webpackChunkjan_admin"]=self["webpackChunkjan_admin"]||[]).push([[964],{730:function(e,l,t){t.d(l,{Uy:function(){return a},b6:function(){return i}});const a=()=>[{id:"1",title:"超级管理员",describe:"唯一账号，可以操作系统所有功能"},{id:"2",title:"管理员",describe:"由超管指定，可以为多个，协助超管管理系统"},{id:"3",title:"人事经理",describe:"主管人事相关业务"},{id:"4",title:"销售经理",describe:"主管销售相关业务"},{id:"5",title:"保安队长",describe:"主管安保相关业务"},{id:"6",title:"员工",describe:"普通员工"}],i=e=>["1","1-1","1-2","1-3","2","2-1","3","4","5"]},9790:function(e,l,t){t.d(l,{IC:function(){return a},IT:function(){return s},Z8:function(){return n},cQ:function(){return i},h8:function(){return o},n3:function(){return u}});const a=e=>({list:[{role:[{id:"1",title:"超级管理员"}],_id:"612710a0ec87aa543c9c341d",id:"0",openTime:"1433088000000",username:"super-admin",mobile:"188xxxx0001",avatar:"https://m.imooc.com/static/wap/static/common/img/logo-small@2x.png"},{role:[{id:"2",title:"管理员"}],_id:"612710a0ec87aa543c9c341e",id:"1",username:"admin",openTime:"1559318400000",mobile:"188xxxx0002",avatar:"https://img4.sycdn.imooc.com/61110c2b0001152907400741-140-140.jpg"}],total:7,page:"1",size:"2"}),i=e=>null,o=e=>!0,n=()=>({list:[{role:[{id:"1",title:"超级管理员"}],_id:"612710a0ec87aa543c9c341d",id:"0",openTime:"1433088000000",username:"super-admin",mobile:"188xxxx0001",avatar:"https://m.imooc.com/static/wap/static/common/img/logo-small@2x.png"},{role:[{id:"2",title:"管理员"}],_id:"612710a0ec87aa543c9c341e",id:"1",username:"admin",openTime:"1559318400000",mobile:"188xxxx0002",avatar:"https://img4.sycdn.imooc.com/61110c2b0001152907400741-140-140.jpg"}],total:7,page:"1",size:"2"}),u=e=>({role:[{id:"1",title:"超级管理员"}],remark:["超级管理员","BOSS"],experience:[{startTime:"1538323200000",endTime:"1551369600000",title:"慕课网",desc:"混合开发京东商城"},{startTime:"1614528000000",endTime:"1625068800000",title:"慕课网",desc:"uni-app 开发企业级小程序"}],_id:"612710a0ec87aa543c9c341d",id:"0",openTime:"1433088000000",username:"super-admin",title:"超级管理员",mobile:"188xxxx0001",avatar:"https://m.imooc.com/static/wap/static/common/img/logo-small@2x.png",gender:"男",nationality:"汉",address:"北京市朝阳区xx大道 11xx0 号 3 层",major:"在线职业教育平台",glory:"国内领先的线上 IT 教育品牌"}),s=e=>[{title:"超级管理员"}]},5964:function(e,l,t){t.r(l),t.d(l,{default:function(){return j}});t(7658);var a=t(6252),i=t(3577),o=t(9790),n=t(2262),u=t(3188),s=t(2201),r=t(9737),m=t(1348),c=t(9150);const d={"姓名":"username","联系方式":"mobile","角色":"role","开通时间":"openTime"};var p=t(7484),g=t.n(p);const w=(e,l="YYYY-MM-DD")=>isNaN(e)?e:(e=parseInt(e),g()(e).format(l)),v={class:"dialog-footer"};var x={__name:"Export2Excel",props:{modelValue:{type:Boolean,required:!0}},emits:["update:modelValue"],setup(e,{emit:l}){const s=(0,n.iH)(!1),r=async()=>{s.value=!0;const e=(0,o.Z8)().list,l=await Promise.all([t.e(869),t.e(62)]).then(t.bind(t,62)),a=m(d,e);l.export_json_to_excel({header:Object.keys(d),data:a,filename:f.value||x,autoWidth:!0,bookType:"xlsx"}),p()},m=(e,l)=>l.map((l=>Object.keys(e).map((t=>{if("openTime"===e[t])return w(l[e[t]]);if("role"===e[t]){const a=l[e[t]];return JSON.stringify(a.map((e=>e.title)))}return l[e[t]]})))),p=()=>{l("update:modelValue",!1)},g=(0,c.QT)();let x=g.t("msg.excel.defaultName");const f=(0,n.iH)("");return f.value=x,(0,u.K)((()=>{x=g.t("msg.excel.defaultName"),f.value=x})),(l,t)=>{const o=(0,a.up)("el-input"),n=(0,a.up)("el-button"),u=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(u,{title:l.$t("msg.excel.title"),"model-value":e.modelValue,width:"30%",onClose:p},{footer:(0,a.w5)((()=>[(0,a._)("span",v,[(0,a.Wm)(n,{onClick:p},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.$t("msg.excel.close")),1)])),_:1}),(0,a.Wm)(n,{type:"primary",onClick:r,loading:s.value},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.$t("msg.excel.confirm")),1)])),_:1},8,["loading"])])])),default:(0,a.w5)((()=>[(0,a.Wm)(o,{modelValue:f.value,"onUpdate:modelValue":t[0]||(t[0]=e=>f.value=e),placeholder:l.$t("msg.excel.placeholder")},null,8,["modelValue","placeholder"])])),_:1},8,["title","model-value"])}}};const f=x;var b=f,_=t(730);const y={class:"dialog-footer"};var k={__name:"RolesDialog",props:{modelValue:{type:Boolean,required:!0},userId:{type:String,required:!0}},emits:["update:modelValue","updateRole"],setup(e,{emit:l}){const t=e,s=()=>{const e=(0,o.IT)(t.userId);p.value=e.map((e=>e.title))};(0,a.YP)((()=>t.userId),(e=>{e&&s()}));const r=(0,n.iH)([]),d=async()=>{r.value=await(0,_.Uy)()};d(),(0,u.K)(d);const p=(0,n.iH)([]),g=(0,c.QT)(),w=async()=>{m.z8.success(g.t("msg.role.updateRoleSuccess")),l("updateRole"),v()},v=()=>{l("update:modelValue",!1)};return(l,t)=>{const o=(0,a.up)("el-checkbox"),n=(0,a.up)("el-checkbox-group"),u=(0,a.up)("el-button"),s=(0,a.up)("el-dialog");return(0,a.wg)(),(0,a.j4)(s,{title:l.$t("msg.excel.roleDialogTitle"),"model-value":e.modelValue,onClose:v},{footer:(0,a.w5)((()=>[(0,a._)("span",y,[(0,a.Wm)(u,{onClick:v},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.$t("msg.universal.cancel")),1)])),_:1}),(0,a.Wm)(u,{type:"primary",onClick:w},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(l.$t("msg.universal.confirm")),1)])),_:1})])])),default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e)},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(r.value,(e=>((0,a.wg)(),(0,a.j4)(o,{key:e.id,label:e.title},null,8,["label"])))),128))])),_:1},8,["modelValue"])])),_:1},8,["title","model-value"])}}};const h=k;var z=h;const T={class:"user-manage-container"},W={key:0},C={key:1,size:"mini"};var U={__name:"index",setup(e){const l=(0,n.iH)([]),t=(0,n.iH)(0),d=(0,n.iH)(1),p=(0,n.iH)(2),g=()=>{const e=(0,o.IC)({page:d.value,size:p.value});l.value=e.list,t.value=e.total};g(),(0,u.K)(g);const w=e=>{p.value=e,g()},v=e=>{d.value=e,g()},x=(0,s.tv)(),f=()=>{x.push("/user/import")};(0,a.dl)(g);const _=(0,c.QT)(),y=e=>{r.T.confirm(_.t("msg.excel.dialogTitle1")+e.username+_.t("msg.excel.dialogTitle2"),{type:"warning"}).then((async()=>{await(0,o.h8)(e._id),m.z8.success(_.t("msg.excel.removeSuccess")),g()}))},k=(0,n.iH)(!1),h=()=>{k.value=!0},U=e=>{x.push(`/user/info/${e}`)},$=(0,n.iH)(!1),V=(0,n.iH)(""),j=e=>{$.value=!0,V.value=e._id};return(0,a.YP)($,(e=>{e||(V.value="")})),(e,o)=>{const n=(0,a.up)("el-button"),u=(0,a.up)("el-card"),s=(0,a.up)("el-table-column"),r=(0,a.up)("el-image"),m=(0,a.up)("el-tag"),c=(0,a.up)("el-table"),p=(0,a.up)("el-pagination"),x=(0,a.Q2)("permission");return(0,a.wg)(),(0,a.iD)("div",T,[(0,a.Wm)(u,{class:"header"},{default:(0,a.w5)((()=>[(0,a._)("div",null,[(0,a.wy)(((0,a.wg)(),(0,a.j4)(n,{type:"primary",onClick:f},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.importExcel")),1)])),_:1})),[[x,["importUser"]]]),(0,a.Wm)(n,{type:"success",onClick:h},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.exportExcel")),1)])),_:1})])])),_:1}),(0,a.Wm)(u,null,{default:(0,a.w5)((()=>[(0,a.Wm)(c,{data:l.value,border:"",style:{width:"100%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(s,{type:"index"}),(0,a.Wm)(s,{prop:"username",label:e.$t("msg.excel.name")},null,8,["label"]),(0,a.Wm)(s,{prop:"mobile",label:e.$t("msg.excel.mobile")},null,8,["label"]),(0,a.Wm)(s,{label:e.$t("msg.excel.avatar"),align:"center"},{default:(0,a.w5)((({row:e})=>[(0,a.Wm)(r,{class:"avatar",src:e.avatar,"preview-src-list":[e.avatar]},null,8,["src","preview-src-list"])])),_:1},8,["label"]),(0,a.Wm)(s,{label:e.$t("msg.excel.role")},{default:(0,a.w5)((({row:l})=>[l.role&&l.role.length>0?((0,a.wg)(),(0,a.iD)("div",W,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(l.role,(e=>((0,a.wg)(),(0,a.j4)(m,{size:"mini",key:e.id},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.title),1)])),_:2},1024)))),128))])):((0,a.wg)(),(0,a.iD)("div",C,[(0,a.Wm)(m,{size:"mini"},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.defaultRole")),1)])),_:1})]))])),_:1},8,["label"]),(0,a.Wm)(s,{prop:"openTime",label:e.$t("msg.excel.openTime")},{default:(0,a.w5)((({row:l})=>[(0,a.Uk)((0,i.zw)(e.$filters.dateFilter(l.openTime)),1)])),_:1},8,["label"]),(0,a.Wm)(s,{label:e.$t("msg.excel.action"),fixed:"right",width:"260"},{default:(0,a.w5)((({row:l})=>[(0,a.Wm)(n,{type:"primary",size:"mini",onClick:e=>U(l._id)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.show")),1)])),_:2},1032,["onClick"]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(n,{type:"info",size:"mini",onClick:e=>j(l)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.showRole")),1)])),_:2},1032,["onClick"])),[[x,["distributeRole"]]]),(0,a.wy)(((0,a.wg)(),(0,a.j4)(n,{type:"danger",size:"mini",onClick:e=>y(l)},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(e.$t("msg.excel.remove")),1)])),_:2},1032,["onClick"])),[[x,["removeUser"]]])])),_:1},8,["label"])])),_:1},8,["data"]),(0,a.Wm)(p,{class:"pagination",total:t.value,"current-page":d.value,"page-size":[2,5,10,20],onCurrentChange:v,onSizeChange:w,layout:"total, sizes, prev, pager, next, jumper"},null,8,["total","current-page"]),(0,a.Wm)(b,{modelValue:k.value,"onUpdate:modelValue":o[0]||(o[0]=e=>k.value=e)},null,8,["modelValue"]),(0,a.Wm)(z,{modelValue:$.value,"onUpdate:modelValue":o[1]||(o[1]=e=>$.value=e),userId:V.value,onUpdateRole:g},null,8,["modelValue","userId"])])),_:1})])}}},$=t(3744);const V=(0,$.Z)(U,[["__scopeId","data-v-d42cec92"]]);var j=V}}]);
//# sourceMappingURL=964.47f95d74.js.map